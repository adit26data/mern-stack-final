{"ast":null,"code":"import _slicedToArray from\"C:/Users/Adit/Desktop/mern-stack-final/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import{DataGrid}from\"@mui/x-data-grid\";import\"./ProductReviews.css\";import{useSelector,useDispatch}from\"react-redux\";import{clearErrors,getAllReviews,deleteReviews}from\"../../actions/productAction\";import{useAlert}from\"react-alert\";import{Button}from\"@mui/material\";import MetaData from\"../layout/Metadata\";import DeleteIcon from\"@mui/icons-material/Delete\";import Star from\"@mui/icons-material/Star\";import SideBar from\"./Sidebar\";import{DELETE_REVIEW_RESET}from\"../../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductReviews=function ProductReviews(_ref){var history=_ref.history;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.review;}),deleteError=_useSelector.error,isDeleted=_useSelector.isDeleted;var _useSelector2=useSelector(function(state){return state.productReviews;}),error=_useSelector2.error,reviews=_useSelector2.reviews,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var deleteReviewHandler=function deleteReviewHandler(reviewId){dispatch(deleteReviews(reviewId,productId));};var productReviewsSubmitHandler=function productReviewsSubmitHandler(e){e.preventDefault();dispatch(getAllReviews(productId));};useEffect(function(){if(productId.length===24){dispatch(getAllReviews(productId));}if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Review Deleted Successfully\");history.push(\"/admin/reviews\");dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,deleteError,history,isDeleted,productId]);var columns=[{field:\"id\",headerName:\"Review ID\",minWidth:200,flex:0.5},{field:\"user\",headerName:\"User\",minWidth:200,flex:0.6},{field:\"comment\",headerName:\"Comment\",minWidth:350,flex:1},{field:\"rating\",headerName:\"Rating\",type:\"number\",minWidth:180,flex:0.4,cellClassName:function cellClassName(params){return params.row.rating>=3?\"greenColor\":\"redColor\";}},{field:\"actions\",flex:0.3,headerName:\"Actions\",minWidth:150,type:\"number\",sortable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteReviewHandler(params.row.id);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})});}}];var rows=[];reviews&&reviews.forEach(function(item){rows.push({id:item._id,rating:item.rating,comment:item.comment,user:item.name});});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"ALL REVIEWS - Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"productReviewsContainer\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"productReviewsForm\",onSubmit:productReviewsSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"ALL REVIEWS\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Star,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Id\",required:true,value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:loading?true:false||productId===\"\"?true:false,children:\"Search\"})]}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,pageSize:10,disableSelectionOnClick:true,className:\"productListTable\",autoHeight:true}):/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"No Reviews Found\"})]})]})]});};export default ProductReviews;","map":{"version":3,"names":["React","Fragment","useEffect","useState","DataGrid","useSelector","useDispatch","clearErrors","getAllReviews","deleteReviews","useAlert","Button","MetaData","DeleteIcon","Star","SideBar","DELETE_REVIEW_RESET","jsx","_jsx","jsxs","_jsxs","ProductReviews","_ref","history","dispatch","alert","_useSelector","state","review","deleteError","error","isDeleted","_useSelector2","productReviews","reviews","loading","_useState","_useState2","_slicedToArray","productId","setProductId","deleteReviewHandler","reviewId","productReviewsSubmitHandler","e","preventDefault","length","success","push","type","columns","field","headerName","minWidth","flex","cellClassName","params","row","rating","sortable","renderCell","children","onClick","id","rows","forEach","item","_id","comment","user","name","title","className","onSubmit","placeholder","required","value","onChange","target","disabled","pageSize","disableSelectionOnClick","autoHeight"],"sources":["C:/Users/Adit/Desktop/mern-stack-final/frontend/src/component/admin/ProductReviews.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { DataGrid } from \"@mui/x-data-grid\";\r\nimport \"./ProductReviews.css\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n    clearErrors,\r\n    getAllReviews,\r\n    deleteReviews,\r\n} from \"../../actions/productAction\";\r\nimport { useAlert } from \"react-alert\";\r\nimport { Button } from \"@mui/material\";\r\nimport MetaData from \"../layout/Metadata\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport Star from \"@mui/icons-material/Star\";\r\n\r\nimport SideBar from \"./Sidebar\";\r\nimport { DELETE_REVIEW_RESET } from \"../../constants/productConstants\";\r\n\r\nconst ProductReviews = ({ history }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const alert = useAlert();\r\n\r\n    const { error: deleteError, isDeleted } = useSelector(\r\n        (state) => state.review\r\n    );\r\n\r\n    const { error, reviews, loading } = useSelector(\r\n        (state) => state.productReviews\r\n    );\r\n\r\n    const [productId, setProductId] = useState(\"\");\r\n\r\n    const deleteReviewHandler = (reviewId) => {\r\n        dispatch(deleteReviews(reviewId, productId));\r\n    };\r\n\r\n    const productReviewsSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(getAllReviews(productId));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (productId.length === 24) {\r\n            dispatch(getAllReviews(productId));\r\n        }\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (deleteError) {\r\n            alert.error(deleteError);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isDeleted) {\r\n            alert.success(\"Review Deleted Successfully\");\r\n            history.push(\"/admin/reviews\");\r\n            dispatch({ type: DELETE_REVIEW_RESET });\r\n        }\r\n    }, [dispatch, alert, error, deleteError, history, isDeleted, productId]);\r\n\r\n    const columns = [\r\n        { field: \"id\", headerName: \"Review ID\", minWidth: 200, flex: 0.5 },\r\n\r\n        {\r\n            field: \"user\",\r\n            headerName: \"User\",\r\n            minWidth: 200,\r\n            flex: 0.6,\r\n        },\r\n\r\n        {\r\n            field: \"comment\",\r\n            headerName: \"Comment\",\r\n            minWidth: 350,\r\n            flex: 1,\r\n        },\r\n\r\n        {\r\n            field: \"rating\",\r\n            headerName: \"Rating\",\r\n            type: \"number\",\r\n            minWidth: 180,\r\n            flex: 0.4,\r\n\r\n            cellClassName: (params) => {\r\n                return params.row.rating >= 3\r\n                    ? \"greenColor\"\r\n                    : \"redColor\";\r\n            },\r\n        },\r\n\r\n        {\r\n            field: \"actions\",\r\n            flex: 0.3,\r\n            headerName: \"Actions\",\r\n            minWidth: 150,\r\n            type: \"number\",\r\n            sortable: false,\r\n            renderCell: (params) => {\r\n                return (\r\n                    <Fragment>\r\n                        <Button\r\n                            onClick={() =>\r\n                                deleteReviewHandler(params.row.id)\r\n                            }\r\n                        >\r\n                            <DeleteIcon />\r\n                        </Button>\r\n                    </Fragment>\r\n                );\r\n            },\r\n        },\r\n    ];\r\n\r\n    const rows = [];\r\n\r\n    reviews &&\r\n        reviews.forEach((item) => {\r\n            rows.push({\r\n                id: item._id,\r\n                rating: item.rating,\r\n                comment: item.comment,\r\n                user: item.name,\r\n            });\r\n        });\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title={`ALL REVIEWS - Admin`} />\r\n\r\n            <div className=\"dashboard\">\r\n                <SideBar />\r\n                <div className=\"productReviewsContainer\">\r\n                    <form\r\n                        className=\"productReviewsForm\"\r\n                        onSubmit={productReviewsSubmitHandler}\r\n                    >\r\n                        <h1 className=\"productReviewsFormHeading\">ALL REVIEWS</h1>\r\n\r\n                        <div>\r\n                            <Star />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Product Id\"\r\n                                required\r\n                                value={productId}\r\n                                onChange={(e) => setProductId(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <Button\r\n                            id=\"createProductBtn\"\r\n                            type=\"submit\"\r\n                            disabled={\r\n                                loading ? true : false || productId === \"\" ? true : false\r\n                            }\r\n                        >\r\n                            Search\r\n                        </Button>\r\n                    </form>\r\n\r\n                    {reviews && reviews.length > 0 ? (\r\n                        <DataGrid\r\n                            rows={rows}\r\n                            columns={columns}\r\n                            pageSize={10}\r\n                            disableSelectionOnClick\r\n                            className=\"productListTable\"\r\n                            autoHeight\r\n                        />\r\n                    ) : (\r\n                        <h1 className=\"productReviewsFormHeading\">No Reviews Found</h1>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default ProductReviews;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}