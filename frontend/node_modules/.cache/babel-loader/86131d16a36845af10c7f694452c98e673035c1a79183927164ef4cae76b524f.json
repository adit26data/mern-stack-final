{"ast":null,"code":"import _slicedToArray from\"C:/Users/Adit/Desktop/mern-stack-final/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useRef,useState,useEffect}from\"react\";import\"./UpdateProfile.css\";import Loader from\"../layout/Loader/Loader\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{clearErrors,loadUser,updateProfile}from\"../../actions/userAction\";import{useAlert}from\"react-alert\";import MailOutlineIcon from'@mui/icons-material/MailOutline';import FaceIcon from'@mui/icons-material/Face';import Metadata from\"../layout/Metadata\";import{UPDATE_PROFILE_RESET}from\"../../constants/userConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateProfile(_ref){var history=_ref.history,location=_ref.location;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.profile;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"/Profile.png\"),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var updateProfileSubmit=function updateProfileSubmit(e){e.preventDefault();var myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"avatar\",avatar);dispatch(updateProfile(myForm));};var updateProfileDataChange=function updateProfileDataChange(e){if(e.target.name===\"avatar\"){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);};};var redirect=location.search?location.search.split(\"=\")[1]:\"/account\";useEffect(function(){if(user){setName(user.name);setEmail(user.email);setAvatarPreview(user.avatar.url);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){dispatch(loadUser());history.push(\"/account\");dispatch({type:UPDATE_PROFILE_RESET});}},[dispatch,error,alert,history,user,redirect,isUpdated]);return/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Metadata,{title:\"Update Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"updateProfileContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileBox\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"updateProfileHeading\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"updateProfileForm\",encType:\"multipart/form-data\",onSubmit:updateProfileSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileName\",children:[/*#__PURE__*/_jsx(FaceIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",required:true,name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileEmail\",children:[/*#__PURE__*/_jsx(MailOutlineIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"updateProfileImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,alt:\"Avatar Preview\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",onChange:updateProfileDataChange})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",className:\"updateProfileBtn\"})]})]})})]})});}export default UpdateProfile;","map":{"version":3,"names":["React","Fragment","useRef","useState","useEffect","Loader","Link","useDispatch","useSelector","clearErrors","loadUser","updateProfile","useAlert","MailOutlineIcon","FaceIcon","Metadata","UPDATE_PROFILE_RESET","jsx","_jsx","jsxs","_jsxs","UpdateProfile","_ref","history","location","dispatch","alert","_useSelector","state","user","_useSelector2","profile","error","isUpdated","loading","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","avatar","setAvatar","_useState7","_useState8","avatarPreview","setAvatarPreview","updateProfileSubmit","e","preventDefault","myForm","FormData","set","updateProfileDataChange","target","reader","FileReader","onload","readyState","result","readAsDataURL","files","redirect","search","split","url","push","type","children","title","className","encType","onSubmit","placeholder","required","value","onChange","id","src","alt","accept"],"sources":["C:/Users/Adit/Desktop/mern-stack-final/frontend/src/component/User/UpdateProfile.js"],"sourcesContent":["import React, { Fragment, useRef, useState, useEffect } from \"react\";\r\nimport \"./UpdateProfile.css\";\r\nimport Loader from \"../layout/Loader/Loader\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { clearErrors, loadUser, updateProfile } from \"../../actions/userAction\";\r\nimport { useAlert } from \"react-alert\";\r\nimport MailOutlineIcon from '@mui/icons-material/MailOutline';\r\nimport FaceIcon from '@mui/icons-material/Face';\r\nimport Metadata from \"../layout/Metadata\"\r\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\r\nfunction UpdateProfile({ history, location }) {\r\n    const dispatch = useDispatch();\r\n    const alert = useAlert();\r\n\r\n    const { user } = useSelector(\r\n        (state) => state.user\r\n    );\r\n    const { error, isUpdated, loading } = useSelector(\r\n        (state) => state.profile\r\n    );\r\n\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [avatar, setAvatar] = useState();\r\n    const [avatarPreview, setAvatarPreview] = useState(\"/Profile.png\");\r\n    const updateProfileSubmit = (e) => {\r\n        e.preventDefault();\r\n        const myForm = new FormData();\r\n        myForm.set(\"name\", name);\r\n        myForm.set(\"email\", email);\r\n        myForm.set(\"avatar\", avatar);\r\n        dispatch(updateProfile(myForm));\r\n    };\r\n\r\n    const updateProfileDataChange = (e) => {\r\n        if (e.target.name === \"avatar\") {\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = () => {\r\n                if (reader.readyState === 2) {\r\n                    setAvatarPreview(reader.result);\r\n                    setAvatar(reader.result);\r\n                }\r\n            };\r\n\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        };\r\n    };\r\n    const redirect = location.search ? location.search.split(\"=\")[1] : \"/account\";\r\n    useEffect(() => {\r\n        if (user) {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setAvatarPreview(user.avatar.url);\r\n        }\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isUpdated) {\r\n            dispatch(loadUser());\r\n            history.push(\"/account\");\r\n            dispatch({ type: UPDATE_PROFILE_RESET })\r\n        }\r\n    }, [dispatch, error, alert, history, user, redirect, isUpdated]);\r\n\r\n    return (\r\n        <Fragment>\r\n            {loading ? (\r\n                <Loader />\r\n            ) : (\r\n                <Fragment>\r\n                    <Metadata title=\"Update Profile\" />\r\n                    <div className=\"updateProfileContainer\">\r\n                        <div className=\"updateProfileBox\">\r\n                            <h2 className=\"updateProfileHeading\">Update Profile</h2>\r\n\r\n                            <form\r\n                                className=\"updateProfileForm\"\r\n                                encType=\"multipart/form-data\"\r\n                                onSubmit={updateProfileSubmit}\r\n                            >\r\n                                <div className=\"updateProfileName\">\r\n                                    <FaceIcon />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Name\"\r\n                                        required\r\n                                        name=\"name\"\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"updateProfileEmail\">\r\n                                    <MailOutlineIcon />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        placeholder=\"Email\"\r\n                                        required\r\n                                        name=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div id=\"updateProfileImage\">\r\n                                    <img src={avatarPreview} alt=\"Avatar Preview\" />\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        name=\"avatar\"\r\n                                        accept=\"image/*\"\r\n                                        onChange={updateProfileDataChange}\r\n                                    />\r\n                                </div>\r\n                                <input\r\n                                    type=\"submit\"\r\n                                    value=\"Update\"\r\n                                    className=\"updateProfileBtn\"\r\n                                />\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </Fragment>\r\n            )}\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default UpdateProfile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}