{"ast":null,"code":"import _slicedToArray from\"C:/Users/Adit/Desktop/mern-stack-final/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useAlert}from\"react-alert\";import{Button}from\"@mui/material\";import MetaData from\"../layout/Metadata\";import MailOutlineIcon from\"@mui/icons-material/MailOutline\";import PersonIcon from\"@mui/icons-material/Person\";import VerifiedUserIcon from\"@mui/icons-material/VerifiedUser\";import SideBar from\"./Sidebar.js\";import{UPDATE_USER_RESET}from\"../../constants/userConstants\";import{getUserDetails,updateUser,clearErrors}from\"../../actions/userAction\";import Loader from\"../layout/Loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateUser=function UpdateUser(_ref){var history=_ref.history,match=_ref.match;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.userDetails;}),loading=_useSelector.loading,error=_useSelector.error,user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.profile;}),updateLoading=_useSelector2.loading,updateError=_useSelector2.error,isUpdated=_useSelector2.isUpdated;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var userId=match.params.id;useEffect(function(){if(user&&user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setRole(user.role);}if(error){alert.error(error);dispatch(clearErrors());}if(updateError){alert.error(updateError);dispatch(clearErrors());}if(isUpdated){alert.success(\"User Updated Successfully\");history.push(\"/admin/users\");dispatch({type:UPDATE_USER_RESET});}},[dispatch,alert,error,history,isUpdated,updateError,user,userId]);var updateUserSubmitHandler=function updateUserSubmitHandler(e){e.preventDefault();var myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"role\",role);dispatch(updateUser(userId,myForm));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"newProductContainer\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"form\",{className:\"createProductForm\",onSubmit:updateUserSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PersonIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",required:true,value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MailOutlineIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(VerifiedUserIcon,{}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:function onChange(e){return setRole(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"})]})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:updateLoading?true:false||role===\"\"?true:false,children:\"Update\"})]})})]})]});};export default UpdateUser;","map":{"version":3,"names":["React","Fragment","useEffect","useState","useSelector","useDispatch","useAlert","Button","MetaData","MailOutlineIcon","PersonIcon","VerifiedUserIcon","SideBar","UPDATE_USER_RESET","getUserDetails","updateUser","clearErrors","Loader","jsx","_jsx","jsxs","_jsxs","UpdateUser","_ref","history","match","dispatch","alert","_useSelector","state","userDetails","loading","error","user","_useSelector2","profile","updateLoading","updateError","isUpdated","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","role","setRole","userId","params","id","_id","success","push","type","updateUserSubmitHandler","e","preventDefault","myForm","FormData","set","children","title","className","onSubmit","placeholder","required","value","onChange","target","disabled"],"sources":["C:/Users/Adit/Desktop/mern-stack-final/frontend/src/component/admin/UpdateUser.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useAlert } from \"react-alert\";\r\nimport { Button } from \"@mui/material\";\r\nimport MetaData from \"../layout/Metadata\";\r\nimport MailOutlineIcon from \"@mui/icons-material/MailOutline\";\r\nimport PersonIcon from \"@mui/icons-material/Person\";\r\nimport VerifiedUserIcon from \"@mui/icons-material/VerifiedUser\";\r\nimport SideBar from \"./Sidebar.js\";\r\nimport { UPDATE_USER_RESET } from \"../../constants/userConstants\";\r\nimport {\r\n    getUserDetails,\r\n    updateUser,\r\n    clearErrors,\r\n} from \"../../actions/userAction\";\r\nimport Loader from \"../layout/Loader/Loader\";\r\n\r\nconst UpdateUser = ({ history, match }) => {\r\n    const dispatch = useDispatch();\r\n    const alert = useAlert();\r\n\r\n    const { loading, error, user } = useSelector((state) => state.userDetails);\r\n\r\n    const {\r\n        loading: updateLoading,\r\n        error: updateError,\r\n        isUpdated,\r\n    } = useSelector((state) => state.profile);\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [role, setRole] = useState(\"\");\r\n\r\n    const userId = match.params.id;\r\n\r\n    useEffect(() => {\r\n        if (user && user._id !== userId) {\r\n            dispatch(getUserDetails(userId));\r\n        } else {\r\n            setName(user.name);\r\n            setEmail(user.email);\r\n            setRole(user.role);\r\n        }\r\n        if (error) {\r\n            alert.error(error);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (updateError) {\r\n            alert.error(updateError);\r\n            dispatch(clearErrors());\r\n        }\r\n\r\n        if (isUpdated) {\r\n            alert.success(\"User Updated Successfully\");\r\n            history.push(\"/admin/users\");\r\n            dispatch({ type: UPDATE_USER_RESET });\r\n        }\r\n    }, [dispatch, alert, error, history, isUpdated, updateError, user, userId]);\r\n\r\n    const updateUserSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const myForm = new FormData();\r\n\r\n        myForm.set(\"name\", name);\r\n        myForm.set(\"email\", email);\r\n        myForm.set(\"role\", role);\r\n\r\n        dispatch(updateUser(userId, myForm));\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <MetaData title=\"Update User\" />\r\n            <div className=\"dashboard\">\r\n                <SideBar />\r\n                <div className=\"newProductContainer\">\r\n                    {loading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <form\r\n                            className=\"createProductForm\"\r\n                            onSubmit={updateUserSubmitHandler}\r\n                        >\r\n                            <h1>Update User</h1>\r\n\r\n                            <div>\r\n                                <PersonIcon />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Name\"\r\n                                    required\r\n                                    value={name}\r\n                                    onChange={(e) => setName(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <MailOutlineIcon />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    placeholder=\"Email\"\r\n                                    required\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <VerifiedUserIcon />\r\n                                <select value={role} onChange={(e) => setRole(e.target.value)}>\r\n                                    <option value=\"\">Choose Role</option>\r\n                                    <option value=\"admin\">Admin</option>\r\n                                    <option value=\"user\">User</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <Button\r\n                                id=\"createProductBtn\"\r\n                                type=\"submit\"\r\n                                disabled={\r\n                                    updateLoading ? true : false || role === \"\" ? true : false\r\n                                }\r\n                            >\r\n                                Update\r\n                            </Button>\r\n                        </form>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default UpdateUser;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}